import pygame
import random

pygame.init()
pygame.mixer.init()

WHITE = (255, 255, 255)
BLACK = (0, 0, 0)
RED = (255, 0, 0)
GREEN = (14, 209, 69)
BLUE = (0, 0, 255)
YELLOW = (255, 255, 0)
ORANGE = (224, 81, 18)

WIDTH = 800
HEIGHT = 600
FPS = 5

screen = pygame.display.set_mode((WIDTH, HEIGHT))

pygame.display.set_caption("Cobrinha")

cabeca = pygame.image.load('cabeca.png')
coelho = pygame.image.load('coelho.png')
fundo = pygame.image.load('ground.png')

cabeca = pygame.transform.scale(cabeca, (20, 20))
coelho = pygame.transform.scale(coelho, (20, 20))
fundo = pygame.transform.scale(fundo, (WIDTH, HEIGHT))

pygame.mixer.music.load('musica_menu.wav')
pygame.mixer.music.set_volume(0.4)

pygame.display.flip()
clock = pygame.time.Clock()

lado_bloco = 20
lado_coelho = 20

direcao = "direita"

fonte_pequena = pygame.font.SysFont("comicsansms", 24)
fonte_media = pygame.font.SysFont("comicsansms", 48)
fonte_grande = pygame.font.SysFont("comicsansms", 72)

def pause():
    pausado = True
    message_to_screen("Pausado", WHITE, -100, "gde")
    message_to_screen("Aperte Espaço para continuar ou Esc para sair.", WHITE, 25)
    pygame.display.update()

    while pausado:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                pygame.QUIT()
                quit()

            if event.type == pygame.KEYDOWN:
                if event.key == pygame.K_SPACE:
                    pausado = False

                elif event.key == pygame.K_ESCAPE:
                    pygame.quit()
                    quit()
        clock.tick(FPS)


def score(numero):
    texto = fonte_pequena.render("Score: {0}".format(str(numero)), True, WHITE)
    screen.blit(texto, [0, 0])


def gerador_coelho():
    x_coelho = round(random.randrange(lado_coelho, WIDTH - lado_coelho))
    y_coelho = round(random.randrange(lado_coelho, HEIGHT - lado_coelho))
    return x_coelho, y_coelho

rand_coelho_x = gerador_coelho()[0]
rand_coelho_y = gerador_coelho()[1]


def snake(lado, lista_cobra):
    if direcao == "direita":
        cabeca_cobra = pygame.transform.rotate(cabeca, 270)
    if direcao == "esquerda":
        cabeca_cobra = pygame.transform.rotate(cabeca, 90)
    if direcao == "cima":
        cabeca_cobra = cabeca
    if direcao == "baixo":
        cabeca_cobra = pygame.transform.rotate(cabeca, 180)
    screen.blit(cabeca_cobra, (lista_cobra[-1][0], lista_cobra[-1][1]))

    for x_y in lista_cobra[:-1]:
        pygame.draw.rect(screen, GREEN,
                         [x_y[0], x_y[1], lado, lado])

def texto(texto, cor, tamanho):
    if tamanho == "peq":
        local_texto = fonte_pequena.render(texto, True, cor)
    elif tamanho == "med":
        local_texto = fonte_media.render(texto, True, cor)
    elif tamanho == "gde":
        local_texto = fonte_grande.render(texto, True, cor)
    return local_texto, local_texto.get_rect()

def mensagem(msg, cor, posicao_y=0, tam="peq"):
    local_texto, rect_texto = texto(msg, cor, tam)
    rect_texto.center = (WIDTH / 2), (HEIGHT / 2) + posicao_y
    screen.blit(local_texto, rect_texto)


def intro():
    pygame.mixer.music.load('musica_menu.wav')
    pygame.mixer.music.play(loops=-1)

    intro = True

    while intro:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                pygame.quit()
                quit()

            if event.type == pygame.KEYDOWN:
                if event.key == pygame.K_SPACE:
                    intro = False
                if event.key == pygame.K_ESCAPE:
                    pygame.quit()
                    quit()

        screen.fill(BLACK)
        mensagem("Bem vindo", GREEN, -170, "gde")
        mensagem("ao Cobrinha!", GREEN, -90, "gde")
        mensagem("Coma os coelinhos e cresça.", WHITE, -10)
        mensagem("Se você bater em si, ou", RED, 40)
        mensagem("nas bordas, você morre!",
                          RED, 80)
        mensagem("Aperte Espaço para começar, P para pausar e Esc para sair.", WHITE, 180)

        pygame.display.update()
        clock.tick(FPS)

def loop():
    pygame.mixer.music.load("musica_jogo.wav")
    pygame.mixer.music.play(loops=-1)

    comendo = pygame.mixer.Sound("comendo.wav")

    global direcao
    direcao = "direita"
    game_exit = False
    game_over = False

    posicao_x = WIDTH / 2
    posicao_y = HEIGHT / 2
    mudar_x = 10
    mudar_y = 0

    lista_cobra = []
    tamanho_cobra = 1

    rand_coelho_x = gerador_coelho()[0]
    rand_coelho_y = gerador_coelho()[1]
